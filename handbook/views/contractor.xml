<odoo>
  <data>
    <record model="ir.ui.view" id="contractor_tree">
      <field name="name">tech_directory.contractor.tree</field>
      <field name="model">tech_directory.contractor</field>
      <field name="arch" type="xml">
        <tree>

          <field name="client_id" string="Клиент"/>
          <field name="rukovoditel_fio_v_imenitelnom"/>
          <field name="rukovoditel_phone"/>
          <field name="factory_name"/>
        </tree>
      </field>
    </record>


    <record model="ir.ui.view" id="contractor_form">
      <field name="name">tech_directory.contractor.form</field>
      <field name="model">tech_directory.contractor</field>
      <field name="arch" type="xml">

        <form string="contractor">
          <sheet>
            <label for="my_button_fill" string = "Заполнить случайными данными" class="oe_edit_only btn btn-sm btn-primary"/>
            <field name="my_button_fill" invisible="1"/>
            <label for="nalog_api" string = "Заполнить данные из nalog.ru" class="oe_edit_only btn btn-sm btn-primary"/>
            <field name="nalog_api" invisible="1"/>



            <group>
              <group >
                  <field name="client_id" readonly='True' string="Клиент"/>
                  <field name="factory_name_kratkoe"/>
                  <field name="factory_other_comment"/>
              </group>
              <group  >
                  <p>Здесь будущая информация</p>
                    <!-- <field name="actual_data"/> -->

              </group>
                </group>
            <notebook>
              <page string="Лица">
                <group>
                  <field name="rukovoditel_fio_v_imenitelnom"/>
                  <field name="rukovoditel_dolzhnost_v_imenitelnom"/>
                  <field name="rukovoditel_fio_v_roditelnom"/>
                  <field name="rukovoditel_dolzhnost_v_roditelnom"/>
                  <field name="rukovoditel_osnovanie_doc"/>
                  <field name="rukovoditel_phone"/>
                  <field name="rukovoditel_email"/>
                  <field name="buhgalter_phone"/>
                  <field name="buhgalter_email"/>
                  <field name="otvetstvennyj_po_sdelke"/>
                  <field name="otvetstvennyj_po_sdelke_phone"/>
                  <field name="otvetstvennyj_po_sdelke_email"/>
                </group>
              </page>
              <page string="Предприятие">
                <group>
                  <field name="factory_name"/>
                  <field name="factory_yuridicheskij_adres"/>
                  <field name="factory_pochtovyj_adres"/>
                  <field name="factory_inn"/>
                  <field name="factory_kpp"/>
                  <field name="factory_ogrn_ogrnip"/>
                  <field name="factory_okpo"/>
                  <field name="factory_okvehd"/>
                  <field name="factory_raschetnyj_schet"/>
                  <field name="factory_bank"/>
                  <field name="factory_korr_schet"/>
                  <field name="factory_bik"/>
                  <field name="factory_status"/>
                </group>
              </page>
              <page string="Комплект документов">
                <h1>Договора с ос</h1>

                <field name="dogovor_os_ids" widget="kanban"   context="{'tree_view_ref': 'tech_directory.dogovor_tree_contractors'}"/>

                <!-- <h1>Договора с лабораториями</h1>
                <field name="dogovor_lab_ids"  widget="many2many"  /> -->

                <!-- <field name="dogovor_os_ids" readonly="1" nolabel="1"/> -->
                  <!-- <field name="dogovor_lab_ids" domain="[('type_selection', '!=', ''])]" >
                    <tree  >

                    </tree>
                  </field> -->

                  <field name="dogovor_lab_ids"  context="{'tree_view_ref': 'tech_directory.dogovor_tree_contractors'}"/>

              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.ui.view" id="dogovor_tree_contractors">
      <field name="name">tech_directory.dogovor_contragent</field>
      <field name="model">tech_directory.dogovor</field>
      <field name="arch" type="xml">
          <tree >
            <field name="own_company_id"/>
            <field name="dop_dogovor_ids"/>
            <field name="date"/>
            <field name="type_selection"/>
          </tree>
      </field>
    </record>

    <record model="ir.actions.act_window" id="tech_directory.show_contractor">
      <field name="name">contractor</field>
      <field name="res_model">tech_directory.contractor</field>
      <field name="view_mode">tree,form</field>
      <field name="view_id" ref="contractor_tree"></field>
      <field name="res_id" ref="contractor_form"></field>

    </record>

    <menuitem name="contractor" id="tech_directory.contractor" parent="tech_directory.menu_root" action="tech_directory.show_contractor"/>

  </data>
</odoo>
